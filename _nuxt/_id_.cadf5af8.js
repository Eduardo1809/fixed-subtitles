import{a as F,A as $,B as T,x as j,o as l,h as n,l as e,C as B,t,u as i,F as k,z as C,_ as I,q as x,v as A,f as V,y as N,r as P,m as p,D as g,w as z,c as R,E as q,s as S}from"./entry.697441ec.js";import{s as G}from"./data-handler.6dfa5c07.js";const O={class:"fixed z-10 inset-0 overflow-y-auto"},U={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20"},Y={class:"fixed inset-0"},J={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},K={class:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Q={class:"sm:flex sm:items-start"},W={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},X={class:"text-lg leading-6 font-medium",id:"modal-headline"},Z={key:0,class:"mt-2"},ee={class:"text-sm leading-5"},te={key:1,class:"mt-2"},se={class:"text-sm leading-5"},oe={class:"list-disc list-inside pt-2 text-left"},le={class:"text-sm leading-5"},ne={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ae={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},ie=F({__name:"DownloadHandler",props:["files","folder"],emits:["close"],setup(_,{emit:D}){const s=_,m=$([]),o=$(new Set);async function b(h){h.map(u=>u.path);const{downloadRepoFiles:a,zipAndDownload:v}=await I(()=>import("./download-github.2f061c40.js"),[],import.meta.url),{getFontsFromSubtitle:y}=await I(()=>import("./subtitle-fonts.20058d36.js"),[],import.meta.url);for await(const u of a(h)){const r=y(u.data);for(const f of r)o.value.add(f);m.value.push(u)}v(m.value,s.folder)}T(()=>{b(s.files)});const{t:c}=j();function w(h){return h.reduce((a,v,y)=>a+c("download-modal.font-variant-"+v)+(y===h.length-2?c("download-modal.font-variant-and"):y!==h.length-1?c("download-modal.font-variant-comma"):""),"")}return(h,a)=>(l(),n("div",O,[e("div",U,[e("div",Y,[e("div",{class:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75",onClick:a[0]||(a[0]=B(v=>h.$emit("close"),["self"]))})]),e("div",J,[e("div",K,[e("div",Q,[e("div",W,[e("h3",X,t(i(c)("download-modal.title",_.files.length)),1),m.value.length!==_.files.length?(l(),n("div",Z,[e("p",ee,t(i(c)("download-modal.in-progress")),1)])):(l(),n("div",te,[e("p",se,t(i(c)("download-modal.finished",_.files.length))+" "+t(i(c)("download-modal.fonts",o.value.size)),1),e("ul",oe,[(l(!0),n(k,null,C(o.value,v=>(l(),n("li",le,t(v.name)+" ("+t(w(v.variants))+") ",1))),256))])]))])])]),e("div",ne,[e("span",ae,[e("button",{type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",onClick:a[1]||(a[1]=v=>h.$emit("close"))},t(m.value.length===_.files.length?i(c)("download-modal.close"):i(c)("download-modal.cancel")),1)])])])])]))}}),de={class:"fixed z-10 inset-0 overflow-y-auto"},re={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20"},ce={class:"fixed inset-0"},me={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ue={class:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},fe={class:"sm:flex sm:items-start"},ge={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},_e={class:"text-lg leading-6 font-medium",id:"modal-headline"},he={class:"mt-2"},ve={class:"text-sm leading-5"},pe={class:"list-disc list-inside pt-2 text-left"},xe={class:"text-sm leading-5"},be=["href"],we={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},ye={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},ke=F({__name:"CommitList",props:["commits"],emits:["close"],setup(_,{emit:D}){return(s,m)=>(l(),n("div",de,[e("div",re,[e("div",ce,[e("div",{class:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75",onClick:m[0]||(m[0]=B(o=>s.$emit("close"),["self"]))})]),e("div",me,[e("div",ue,[e("div",fe,[e("div",ge,[e("h3",_e,t(s.$t("commit-modal.title",_.commits.length)),1),e("div",he,[e("p",ve,t(s.$t("commit-modal.explainer",_.commits.length)),1),e("ul",pe,[(l(!0),n(k,null,C(_.commits,o=>(l(),n("li",xe,[e("a",{class:"external-link",href:"https://github.com/qgustavor/fixed-subtitles/commit/"+o[0],target:"_blank"},t(o[0]),9,be),x(" ("+t(s.$t("commit-modal.date",{date:s.$d(new Date(o[1]*1e3))}))+") ",1)]))),256))])])])])]),e("div",we,[e("span",ye,[e("button",{type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",onClick:m[1]||(m[1]=o=>s.$emit("close"))},t(s.$t("commit-modal.close")),1)])])])])]))}}),$e={key:0,class:"dark:text-white text-center text-2xl py-20"},Ce={class:"text-8xl mt-2"},Le={key:1,class:"container px-6 mx-auto flex flex-col md:flex-row"},De={class:"w-full md:w-1/3 lg:w-1/5 mr-6"},Fe={class:"flex md:flex-col"},Ee={class:"relative mb-3 w-2/5 md:w-full"},Ie=e("div",{class:"aspect-ratio-9-14"},null,-1),Ve=["src"],ze={class:"w-full ml-3 md:ml-0 lg:text-lg"},Re={class:"leading-8 font-bold text-xl md:hidden"},je=["href","onClick"],Be={class:"w-full"},He={class:"pb-4 font-bold text-2xl lg:text-3xl hidden md:block"},Me={key:0},Te=["onClick"],Ae={key:1},Ne={key:2},Pe={class:"pb-2 lg:text-lg"},qe=["href"],Se={class:"external-link"},Ge={class:"external-link"},Oe={class:"external-link"},Ue=["innerHTML"],Ye={class:"text-left w-full border-collapse"},Je={class:"p-2 font-bold text-sm"},Ke={class:"p-2 font-bold text-sm text-center"},Qe={class:"p-2 font-bold text-sm text-right"},We={class:"hover:bg-grey-lighter"},Xe={class:"p-2"},Ze=["onClick"],et={class:"p-2 text-center"},tt={class:"p-2 text-right"},lt=F({__name:"[id]",props:["slug"],setup(_){const D=A(),s=V(()=>G.find(u=>u.slug===D.params.id)),m=s.value&&s.value.groups.length===1?s.value.groups[0]:null,o=$(m),b=$(null);function c(u){const r=u?[u]:o.value.files,f=window.encodeURIComponent(s.value.folder)+"/"+window.encodeURIComponent(o.value.name)+"/";for(const L of r)L.path=f+L.name;b.value=r}const w=$(null);function h(u){}const{t:a,d:v}=j(),y=V(()=>s.value&&s.value.metadata.title);return N({title:y}),(u,r)=>{const f=S,L=P("i18n-t"),H=ie,M=ke;return l(),n(k,null,[s.value?g("",!0):(l(),n("div",$e,[x(t(i(a)("not-found"))+" ",1),e("div",Ce,[p(f,{name:"carbon:document-unknown",class:"iconify inline-block"})])])),s.value?(l(),n("div",Le,[e("div",De,[e("div",Fe,[e("div",Ee,[Ie,e("img",{class:"absolute left-0 top-0 w-full h-full object-cover",src:s.value.metadata.coverImage},null,8,Ve)]),e("div",ze,[e("h1",Re,t(s.value.metadata.title),1),e("ul",null,[e("li",null,[p(L,{keypath:"full-season",scope:"global"},{season:z(()=>[x(t(i(a)("seasons."+s.value.metadata.season)),1)]),seasonYear:z(()=>[x(t(s.value.metadata.seasonYear),1)]),_:1})]),e("li",null,t(i(a)("episodes",s.value.metadata.episodes)),1),e("li",null,t(i(a)("formats."+s.value.metadata.format)),1),(l(!0),n(k,null,C(s.value.metadata.externalLinks,d=>(l(),n("li",{key:d.url,class:"lg:text-md"},[e("a",{href:d.url,class:"external-link",onClick:E=>(d.url,void 0)},t(d.site),9,je)]))),128))])])])]),e("div",Be,[e("h1",He,t(s.value.metadata.title),1),s.value.groups.length>1?(l(),n("div",Me,[(l(!0),n(k,null,C(s.value.groups,d=>(l(),n("button",{key:d.name,class:q(["dark:text-white border-2 py-2 px-4 focus:outline-none rounded text-center mr-2 mb-2",[o.value&&o.value.name===d.name?"bg-indigo-200 border-indigo-300 dark:bg-indigo-500 dark:border-indigo-400":"bg-gray-100 hover:bg-gray-200 border-gray-300 dark:bg-gray-900 dark-hover:bg-gray-800 dark:border-gray-700"]]),onClick:E=>o.value=d},t(d.name),11,Te))),128))])):g("",!0),o.value?g("",!0):(l(),n("div",Ae,t(i(a)("select-group")),1)),o.value?(l(),n("div",Ne,[e("div",Pe,[p(f,{name:"carbon:language",class:"iconify group-stat-icon mr-1"}),x(" "+t(i(a)("languages."+o.value.metadata.language,"?"))+" ",1),p(f,{name:"carbon:categories",class:"iconify group-stat-icon mx-1"}),x(" "+t(i(a)("file-count",o.value.files.length))+" ",1),p(f,{name:"carbon:clean",class:"iconify group-stat-icon mx-1"}),x(" "+t(i(a)("changed-lines-count",o.value.changedLines))+" ",1),o.value.commits.length===1?(l(),n("a",{key:0,href:"https://github.com/qgustavor/fixed-subtitles/commit/"+o.value.commits[0][0],target:"_blank"},[p(f,{name:"carbon:edit",class:"iconify group-stat-icon mx-1"}),e("span",Se,t(i(a)("commit-count",o.value.commits.length)),1)],8,qe)):g("",!0),o.value.commits.length>1?(l(),n("button",{key:1,onClick:r[0]||(r[0]=d=>w.value=o.value.commits)},[p(f,{name:"carbon:edit",class:"iconify group-stat-icon mx-1"}),e("span",Ge,t(i(a)("commit-count",o.value.commits.length)),1)])):g("",!0),o.value.files.length>1?(l(),n("button",{key:2,onClick:r[1]||(r[1]=d=>c())},[p(f,{name:"carbon:download",class:"iconify group-stat-icon mx-1"}),e("span",Oe,t(i(a)("download-all")),1)])):g("",!0)]),o.value.metadata.content?(l(),n("div",{key:0,innerHTML:o.value.metadata.content,class:"group-info"},null,8,Ue)):g("",!0),e("table",Ye,[e("thead",null,[e("tr",null,[e("th",Je,t(i(a)("group-list.filename")),1),e("th",Ke,t(i(a)("group-list.modified")),1),e("th",Qe,t(i(a)("group-list.changedLines")),1)])]),e("tbody",null,[(l(!0),n(k,null,C(o.value.files,d=>(l(),n("tr",We,[e("td",Xe,[e("button",{onClick:E=>c(d),class:"external-link text-left"},t(d.name),9,Ze)]),e("td",et,t(i(v)(new Date(d.lastModified*1e3))),1),e("td",tt,t(d.changedLines),1)]))),256))])])])):g("",!0)])])):g("",!0),b.value?(l(),R(H,{key:2,files:b.value,folder:s.value.metadata.title,onClose:r[2]||(r[2]=d=>b.value=null)},null,8,["files","folder"])):g("",!0),w.value?(l(),R(M,{key:3,commits:w.value,onClose:r[3]||(r[3]=d=>w.value=null)},null,8,["commits"])):g("",!0)],64)}}});export{lt as default};
