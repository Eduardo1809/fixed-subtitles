import{a as F,A as $,B as T,x as j,o as n,h as a,l as t,C as B,t as s,u as e,F as k,z as C,_ as I,q as x,v as A,f as V,y as N,m as p,D as g,w as z,c as R,r as P,E as q,s as S}from"./entry.ffaa0454.js";import{s as G}from"./data-handler.6dfa5c07.js";const O={class:"fixed z-10 inset-0 overflow-y-auto"},U={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20"},Y={class:"fixed inset-0"},J={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},K={class:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Q={class:"sm:flex sm:items-start"},W={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},X={class:"text-lg leading-6 font-medium",id:"modal-headline"},Z={key:0,class:"mt-2"},tt={class:"text-sm leading-5"},et={key:1,class:"mt-2"},st={class:"text-sm leading-5"},ot={class:"list-disc list-inside pt-2 text-left"},lt={class:"text-sm leading-5"},nt={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},at={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},it=F({__name:"DownloadHandler",props:["files","folder"],emits:["close"],setup(_,{emit:D}){const o=_,m=$([]),l=$(new Set);async function b(h){h.map(u=>u.path);const{downloadRepoFiles:i,zipAndDownload:v}=await I(()=>import("./download-github.2f061c40.js"),[],import.meta.url),{getFontsFromSubtitle:y}=await I(()=>import("./subtitle-fonts.20058d36.js"),[],import.meta.url);for await(const u of i(h)){const r=y(u.data);for(const f of r)l.value.add(f);m.value.push(u)}v(m.value,o.folder)}T(()=>{b(o.files)});const{t:c}=j();function w(h){return h.reduce((i,v,y)=>i+c("download-modal.font-variant-"+v)+(y===h.length-2?c("download-modal.font-variant-and"):y!==h.length-1?c("download-modal.font-variant-comma"):""),"")}return(h,i)=>(n(),a("div",O,[t("div",U,[t("div",Y,[t("div",{class:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75",onClick:i[0]||(i[0]=B(v=>h.$emit("close"),["self"]))})]),t("div",J,[t("div",K,[t("div",Q,[t("div",W,[t("h3",X,s(e(c)("download-modal.title",_.files.length)),1),m.value.length!==_.files.length?(n(),a("div",Z,[t("p",tt,s(e(c)("download-modal.in-progress")),1)])):(n(),a("div",et,[t("p",st,s(e(c)("download-modal.finished",_.files.length))+" "+s(e(c)("download-modal.fonts",l.value.size)),1),t("ul",ot,[(n(!0),a(k,null,C(l.value,v=>(n(),a("li",lt,s(v.name)+" ("+s(w(v.variants))+") ",1))),256))])]))])])]),t("div",nt,[t("span",at,[t("button",{type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",onClick:i[1]||(i[1]=v=>h.$emit("close"))},s(m.value.length===_.files.length?e(c)("download-modal.close"):e(c)("download-modal.cancel")),1)])])])])]))}}),dt={class:"fixed z-10 inset-0 overflow-y-auto"},rt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20"},ct={class:"fixed inset-0"},mt={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},ut={class:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ft={class:"sm:flex sm:items-start"},gt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},_t={class:"text-lg leading-6 font-medium",id:"modal-headline"},ht={class:"mt-2"},vt={class:"text-sm leading-5"},pt={class:"list-disc list-inside pt-2 text-left"},xt={class:"text-sm leading-5"},bt=["href"],wt={class:"bg-gray-50 dark:bg-gray-800 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},yt={class:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},kt=F({__name:"CommitList",props:["commits"],emits:["close"],setup(_,{emit:D}){return(o,m)=>(n(),a("div",dt,[t("div",rt,[t("div",ct,[t("div",{class:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75",onClick:m[0]||(m[0]=B(l=>o.$emit("close"),["self"]))})]),t("div",mt,[t("div",ut,[t("div",ft,[t("div",gt,[t("h3",_t,s(o.$t("commit-modal.title",_.commits.length)),1),t("div",ht,[t("p",vt,s(o.$t("commit-modal.explainer",_.commits.length)),1),t("ul",pt,[(n(!0),a(k,null,C(_.commits,l=>(n(),a("li",xt,[t("a",{class:"external-link",href:"https://github.com/qgustavor/fixed-subtitles/commit/"+l[0],target:"_blank"},s(l[0]),9,bt),x(" ("+s(o.$t("commit-modal.date",{date:o.$d(new Date(l[1]*1e3))}))+") ",1)]))),256))])])])])]),t("div",wt,[t("span",yt,[t("button",{type:"button",class:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",onClick:m[1]||(m[1]=l=>o.$emit("close"))},s(o.$t("commit-modal.close")),1)])])])])]))}}),$t={key:0,class:"dark:text-white text-center text-2xl py-20"},Ct={class:"text-8xl mt-2"},Lt={key:1,class:"container px-6 mx-auto flex flex-col md:flex-row"},Dt={class:"w-full md:w-1/3 lg:w-1/5 mr-6"},Ft={class:"flex md:flex-col"},Et={class:"relative mb-3 w-2/5 md:w-full"},It=t("div",{class:"aspect-ratio-9-14"},null,-1),Vt=["src"],zt={class:"w-full ml-3 md:ml-0 lg:text-lg"},Rt={class:"leading-8 font-bold text-xl md:hidden"},jt=["href","onClick"],Bt={class:"w-full"},Ht={class:"pb-4 font-bold text-2xl lg:text-3xl hidden md:block"},Mt={key:0},Tt=["onClick"],At={key:1},Nt={key:2},Pt={class:"pb-2 lg:text-lg"},qt=["href"],St={class:"external-link"},Gt={class:"external-link"},Ot={class:"external-link"},Ut=["innerHTML"],Yt={class:"text-left w-full border-collapse"},Jt={class:"p-2 font-bold text-sm"},Kt={class:"p-2 font-bold text-sm text-center"},Qt={class:"p-2 font-bold text-sm text-right"},Wt={class:"hover:bg-grey-lighter"},Xt={class:"p-2"},Zt=["onClick"],te={class:"p-2 text-center"},ee={class:"p-2 text-right"},le=F({__name:"[id]",props:["slug"],setup(_){const D=A(),o=V(()=>G.find(u=>u.slug===D.params.id)),m=o.value&&o.value.groups.length===1?o.value.groups[0]:null,l=$(m),b=$(null);function c(u){const r=u?[u]:l.value.files,f=window.encodeURIComponent(o.value.folder)+"/"+window.encodeURIComponent(l.value.name)+"/";for(const L of r)L.path=f+L.name;b.value=r}const w=$(null);function h(u){}const{t:i,d:v}=j(),y=V(()=>o.value&&o.value.metadata.title);return N({title:y}),(u,r)=>{const f=S,L=P("i18n-t"),H=it,M=kt;return n(),a(k,null,[e(o)?g("",!0):(n(),a("div",$t,[x(s(e(i)("not-found"))+" ",1),t("div",Ct,[p(f,{name:"carbon:document-unknown",class:"iconify inline-block"})])])),e(o)?(n(),a("div",Lt,[t("div",Dt,[t("div",Ft,[t("div",Et,[It,t("img",{class:"absolute left-0 top-0 w-full h-full object-cover",src:e(o).metadata.coverImage},null,8,Vt)]),t("div",zt,[t("h1",Rt,s(e(o).metadata.title),1),t("ul",null,[t("li",null,[p(L,{keypath:"full-season",scope:"global"},{season:z(()=>[x(s(e(i)("seasons."+e(o).metadata.season)),1)]),seasonYear:z(()=>[x(s(e(o).metadata.seasonYear),1)]),_:1})]),t("li",null,s(e(i)("episodes",e(o).metadata.episodes)),1),t("li",null,s(e(i)("formats."+e(o).metadata.format)),1),(n(!0),a(k,null,C(e(o).metadata.externalLinks,d=>(n(),a("li",{key:d.url,class:"lg:text-md"},[t("a",{href:d.url,class:"external-link",onClick:E=>(d.url,void 0)},s(d.site),9,jt)]))),128))])])])]),t("div",Bt,[t("h1",Ht,s(e(o).metadata.title),1),e(o).groups.length>1?(n(),a("div",Mt,[(n(!0),a(k,null,C(e(o).groups,d=>(n(),a("button",{key:d.name,class:q(["dark:text-white border-2 py-2 px-4 focus:outline-none rounded text-center mr-2 mb-2",[l.value&&l.value.name===d.name?"bg-indigo-200 border-indigo-300 dark:bg-indigo-500 dark:border-indigo-400":"bg-gray-100 hover:bg-gray-200 border-gray-300 dark:bg-gray-900 dark-hover:bg-gray-800 dark:border-gray-700"]]),onClick:E=>l.value=d},s(d.name),11,Tt))),128))])):g("",!0),l.value?g("",!0):(n(),a("div",At,s(e(i)("select-group")),1)),l.value?(n(),a("div",Nt,[t("div",Pt,[p(f,{name:"carbon:language",class:"iconify group-stat-icon mr-1"}),x(" "+s(e(i)("languages."+l.value.metadata.language,"?"))+" ",1),p(f,{name:"carbon:categories",class:"iconify group-stat-icon mx-1"}),x(" "+s(e(i)("file-count",l.value.files.length))+" ",1),p(f,{name:"carbon:clean",class:"iconify group-stat-icon mx-1"}),x(" "+s(e(i)("changed-lines-count",l.value.changedLines))+" ",1),l.value.commits.length===1?(n(),a("a",{key:0,href:"https://github.com/qgustavor/fixed-subtitles/commit/"+l.value.commits[0][0],target:"_blank"},[p(f,{name:"carbon:edit",class:"iconify group-stat-icon mx-1"}),t("span",St,s(e(i)("commit-count",l.value.commits.length)),1)],8,qt)):g("",!0),l.value.commits.length>1?(n(),a("button",{key:1,onClick:r[0]||(r[0]=d=>w.value=l.value.commits)},[p(f,{name:"carbon:edit",class:"iconify group-stat-icon mx-1"}),t("span",Gt,s(e(i)("commit-count",l.value.commits.length)),1)])):g("",!0),l.value.files.length>1?(n(),a("button",{key:2,onClick:r[1]||(r[1]=d=>c())},[p(f,{name:"carbon:download",class:"iconify group-stat-icon mx-1"}),t("span",Ot,s(e(i)("download-all")),1)])):g("",!0)]),l.value.metadata.content?(n(),a("div",{key:0,innerHTML:l.value.metadata.content,class:"group-info"},null,8,Ut)):g("",!0),t("table",Yt,[t("thead",null,[t("tr",null,[t("th",Jt,s(e(i)("group-list.filename")),1),t("th",Kt,s(e(i)("group-list.modified")),1),t("th",Qt,s(e(i)("group-list.changedLines")),1)])]),t("tbody",null,[(n(!0),a(k,null,C(l.value.files,d=>(n(),a("tr",Wt,[t("td",Xt,[t("button",{onClick:E=>c(d),class:"external-link text-left"},s(d.name),9,Zt)]),t("td",te,s(e(v)(new Date(d.lastModified*1e3))),1),t("td",ee,s(d.changedLines),1)]))),256))])])])):g("",!0)])])):g("",!0),b.value?(n(),R(H,{key:2,files:b.value,folder:e(o).metadata.title,onClose:r[2]||(r[2]=d=>b.value=null)},null,8,["files","folder"])):g("",!0),w.value?(n(),R(M,{key:3,commits:w.value,onClose:r[3]||(r[3]=d=>w.value=null)},null,8,["commits"])):g("",!0)],64)}}});export{le as default};
